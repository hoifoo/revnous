[Unit]
Description=Puma HTTP Server for revnous
After=network.target

[Service]
Type=simple
User=<%= fetch(:user, "deploy") %>
WorkingDirectory=<%= fetch(:deploy_to) %>/current
Environment=RAILS_ENV=<%= fetch(:rails_env, "production") %>
EnvironmentFile=<%= fetch(:deploy_to) %>/shared/.env.systemd
ExecStart=<%= fetch(:rbenv_prefix) %> bundle exec puma -C <%= fetch(:deploy_to) %>/current/config/puma.rb
Restart=always
RestartSec=5
StandardOutput=append:<%= fetch(:deploy_to) %>/shared/log/puma.access.log
StandardError=append:<%= fetch(:deploy_to) %>/shared/log/puma.error.log

[Install]
WantedBy=multi-user.target
