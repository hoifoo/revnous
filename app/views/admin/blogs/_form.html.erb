<%= form_with(model: [:admin, @blog], class: "space-y-6") do |form| %>
  <% if @blog.errors.any? %>
    <div class="bg-red-50 border-l-4 border-red-500 p-4">
      <h3 class="text-sm font-medium text-red-800 mb-2">
        <%= pluralize(@blog.errors.count, "error") %> prohibited this blog from being saved:
      </h3>
      <ul class="list-disc list-inside text-sm text-red-700">
        <% @blog.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="md:col-span-2">
      <%= form.label :title, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :title, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :author, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :author, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :category, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :category, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "e.g., Sales Strategy" %>
    </div>

    <div>
      <%= form.label :published_at, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.datetime_field :published_at, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
      <p class="text-sm text-gray-500 mt-1">Leave blank for draft</p>
    </div>

    <div>
      <%= form.label :slug, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :slug, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "auto-generated if blank" %>
      <p class="text-sm text-gray-500 mt-1">URL-friendly version of title</p>
    </div>

    <div class="md:col-span-2">
      <%= form.label :featured, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.check_box :featured, class: "h-5 w-5 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <span class="ml-2 text-sm text-gray-600">Feature this post on blog homepage</span>
    </div>

    <div class="md:col-span-2">
      <%= form.label :featured_on_home, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.check_box :featured_on_home, class: "h-5 w-5 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <span class="ml-2 text-sm text-gray-600">Feature this post on main homepage</span>
    </div>

    <div class="md:col-span-2">
      <%= form.label :product_ids, "Associated Products", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.collection_check_boxes :product_ids, Product.ordered, :id, :name do |b| %>
        <div class="flex items-center mb-2">
          <%= b.check_box class: "h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
          <%= b.label class: "ml-2 text-sm text-gray-600" %>
        </div>
      <% end %>
      <p class="text-sm text-gray-500 mt-1">Select products this blog is related to</p>
    </div>
  </div>

  <div>
    <%= form.label :excerpt, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :excerpt, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "A short summary that appears in listings..." %>
  </div>

  <div>
    <%= form.label :content, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :content, rows: 15, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent font-mono text-sm", placeholder: "Full blog post content..." %>
    <p class="text-sm text-gray-500 mt-1">Supports line breaks and paragraphs</p>
  </div>

  <div>
    <%= form.label :image, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.file_field :image, accept: "image/*", class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    <% if @blog.image.attached? %>
      <div class="mt-2">
        <%= image_tag @blog.image, class: "h-32 w-auto rounded" %>
      </div>
    <% end %>
  </div>

  <div class="flex items-center justify-end space-x-4 pt-6 border-t border-gray-200">
    <%= link_to "Cancel", admin_blogs_path, class: "px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition font-medium" %>
    <%= form.submit class: "px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition font-medium cursor-pointer" %>
  </div>
<% end %>
