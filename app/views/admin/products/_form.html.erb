<%= form_with(model: [:admin, product], local: true, class: "space-y-6") do |form| %>
  <% if product.errors.any? %>
    <div class="bg-red-50 border-l-4 border-red-500 p-4">
      <h3 class="text-red-800 font-medium mb-2"><%= pluralize(product.errors.count, "error") %> prohibited this product from being saved:</h3>
      <ul class="list-disc list-inside text-red-700">
        <% product.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :name, "Product Name", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_field :name, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "e.g., Revnous for Shopify" %>
  </div>

  <div>
    <%= form.label :logo, "Product Logo", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <% if product.logo.attached? %>
      <div class="mb-4">
        <%= image_tag product.logo, class: "h-24 w-auto object-contain border border-gray-200 rounded p-2" %>
      </div>
    <% end %>
    <%= form.file_field :logo, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", accept: "image/*" %>
    <p class="mt-1 text-sm text-gray-500">Upload product logo (PNG, JPG, SVG recommended)</p>
  </div>

  <div>
    <%= form.label :cover_photo, "Cover Photo (Required for Homepage)", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <% if product.cover_photo.attached? %>
      <div class="mb-4">
        <%= image_tag product.cover_photo, class: "h-48 w-auto object-cover border border-gray-200 rounded" %>
      </div>
    <% end %>
    <%= form.file_field :cover_photo, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", accept: "image/*" %>
    <p class="mt-1 text-sm text-gray-500">Product must have a cover photo to appear on homepage (landscape/hero image)</p>
  </div>

  <div>
    <%= form.label :product_type, "Product Type", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_field :product_type, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "e.g., Shopify App, SaaS, Plugin" %>
  </div>

  <div>
    <%= form.label :url, "Product URL", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.url_field :url, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "https://apps.shopify.com/your-app" %>
  </div>

  <div>
    <%= form.label :short_description, "Short Description", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :short_description, rows: 2, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "Brief one-line description" %>
    <p class="mt-1 text-sm text-gray-500">Used in product cards and listings</p>
  </div>

  <div>
    <%= form.label :description, "Full Description", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :description, rows: 6, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "Detailed product description" %>
  </div>

  <!-- SEO Meta Fields -->
  <div class="border-t border-gray-200 pt-6">
    <h3 class="text-lg font-medium text-gray-900 mb-4">SEO Settings</h3>

    <div class="space-y-4">
      <div>
        <%= form.label :meta_title, "Meta Title", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= form.text_field :meta_title, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "Leave blank to use: #{product.name} - Revnous" %>
        <p class="mt-1 text-sm text-gray-500">Recommended: 50-60 characters. Used for page title and social sharing.</p>
      </div>

      <div>
        <%= form.label :meta_description, "Meta Description", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= form.text_area :meta_description, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "Leave blank to auto-generate from description" %>
        <p class="mt-1 text-sm text-gray-500">Recommended: 150-160 characters. Used for search engine results and social sharing.</p>
      </div>
    </div>
  </div>

  <div>
    <%= form.label :position, "Display Order", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.number_field :position, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-pink-500 focus:border-pink-500", placeholder: "0" %>
    <p class="mt-1 text-sm text-gray-500">Lower numbers appear first</p>
  </div>

  <div class="space-y-3">
    <div class="flex items-center">
      <%= form.check_box :active, class: "h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <%= form.label :active, "Active (Show on website)", class: "ml-2 block text-sm text-gray-900" %>
    </div>

    <div class="flex items-center">
      <%= form.check_box :featured, class: "h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <%= form.label :featured, "Featured product", class: "ml-2 block text-sm text-gray-900" %>
    </div>

    <div class="flex items-center">
      <%= form.check_box :featured_on_home, class: "h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <%= form.label :featured_on_home, "Feature on homepage", class: "ml-2 block text-sm text-gray-900" %>
    </div>
  </div>

  <div class="flex items-center gap-4">
    <%= form.submit class: "px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition font-medium cursor-pointer" %>
    <%= link_to "Cancel", admin_products_path, class: "px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition font-medium" %>
  </div>
<% end %>
