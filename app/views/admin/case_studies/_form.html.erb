<%= form_with(model: [:admin, @case_study], class: "space-y-6") do |form| %>
  <% if @case_study.errors.any? %>
    <div class="bg-red-50 border-l-4 border-red-500 p-4">
      <h3 class="text-sm font-medium text-red-800 mb-2">
        <%= pluralize(@case_study.errors.count, "error") %> prohibited this case study from being saved:
      </h3>
      <ul class="list-disc list-inside text-sm text-red-700">
        <% @case_study.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= form.label :name, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :name, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :industry, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :industry, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :product_features, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :product_features, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :conversion_rate, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :conversion_rate, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :revenue_increase, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.text_field :revenue_increase, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    </div>

    <div>
      <%= form.label :ad_active, "Active Status", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.check_box :ad_active, class: "h-5 w-5 text-pink-600 focus:ring-pink-500 border-gray-300 rounded" %>
      <span class="ml-2 text-sm text-gray-600">Show on homepage</span>
    </div>
  </div>

  <div>
    <%= form.label :description, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :description, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
  </div>

  <div>
    <%= form.label :challenge, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :challenge, rows: 4, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
  </div>

  <div>
    <%= form.label :solution, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :solution, rows: 4, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
  </div>

  <div>
    <%= form.label :results, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :results, rows: 4, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
  </div>

  <div>
    <%= form.label :image, class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.file_field :image, accept: "image/*", class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent" %>
    <% if @case_study.image.attached? %>
      <div class="mt-2">
        <%= image_tag @case_study.image, class: "h-32 w-auto rounded" %>
      </div>
    <% end %>
  </div>

  <div>
    <%= form.label :image_url, "Image URL (fallback)", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_field :image_url, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "https://example.com/image.jpg" %>
    <p class="text-sm text-gray-500 mt-1">Used if no image is uploaded</p>
  </div>

  <div class="flex items-center justify-end space-x-4 pt-6 border-t border-gray-200">
    <%= link_to "Cancel", admin_case_studies_path, class: "px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition font-medium" %>
    <%= form.submit class: "px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition font-medium cursor-pointer" %>
  </div>
<% end %>
